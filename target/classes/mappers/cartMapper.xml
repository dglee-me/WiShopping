<?xml version="1.0" encoding="UTF-8"?>

<!-- DTD 선언 -->
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- Put the goods in the cart -->
<mapper namespace="cartMapper">
	<insert id="addCart">
		INSERT INTO TBL_CART
		VALUES(CARTNO_SEQ.NEXTVAL,#{mno},#{pno},#{cartstock},#{cartsize})
	</insert>
	
	<select id="cartList" resultType="com.lee.myapp.domain.CartListVO">
		select 
    		row_number() over(order by a.cartno asc) as num,
   			a.cartno,a.mno,a.pno,a.cartsize,a.cartstock,b.brand,b.pname,b.product_thumurl,b.price,c.shipping
   		  from tbl_cart a inner join product b on a.pno = b.pno inner join product_option c on b.pno = c.pno
  		 where a.pno = b.pno
    	   and mno = #{mno}
	</select>
</mapper>